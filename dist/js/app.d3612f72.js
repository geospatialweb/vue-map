(function(e){function t(t){for(var s,i,o=t[0],c=t[1],l=t[2],p=0,f=[];p<o.length;p++)i=o[p],n[i]&&f.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"07e4":function(e,t,a){},"0a08":function(e,t,a){},"1f12":function(e,t,a){"use strict";var s=a("07e4"),n=a.n(s);n.a},"27f1":function(e,t,a){"use strict";var s=a("667c"),n=a.n(s);n.a},"2b69":function(e,t,a){"use strict";var s=a("f2c1"),n=a.n(s);n.a},"3ac4":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header"),a("Canvas")],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"mapContainer"},[a("div",{attrs:{id:e.canvas.container}}),a("Splash"),a("Layers"),a("Trails")],1)},o=[],c={accessToken:"pk.eyJ1IjoiZ2Vvc3BhdGlhbHdlYiIsImEiOiJ6WGdOUFRvIn0.GoVRwZq5EfVsLNGyCqgZTw",center:[-76.3,44.45],container:"canvas",zoom:9},l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"layers"},e._l(e.layers,function(t){return a("LayerElements",{key:t.class,attrs:{layer:t},on:{click:e.selectLayer}})})),e._l(e.icons,function(t){return a("LayerIcons",{key:t.class,attrs:{icon:t},on:{click:e.selectLayer}})})],2)},u=[],p=(a("20d6"),{layerStyles:[],layerStylesHash:{},createLayerStylesHash:function(){var e=this;this.layerStyles.map(function(t,a){return e.layerStylesHash[t.id]=a})},pushLayerStyle:function(e){this.layerStyles.push(e)}}),f=(a("ac6a"),a("456d"),a("e192")),m=a.n(f),d={biosphere:{name:"biosphere",fields:"name, description, ST_AsGeoJSON(geom)",layer:{id:"biosphere",type:"fill",source:{type:"geojson"},layout:{visibility:"visible"},paint:{"fill-color":"#090","fill-opacity":.3,"fill-outline-color":"#000"}}},trails:{name:"trails",fields:"name, description, lat, lng, ST_AsGeoJSON(geom)",layer:{id:"trails",type:"line",source:{type:"geojson"},layout:{visibility:"none"},paint:{"line-color":"#aa0000","line-width":2}}}},h={navigationControl:{position:"top-left"}},y={default:"mapbox://styles/mapbox/dark-v9",outdoors:"mapbox://styles/mapbox/outdoors-v9"},v={office:{name:"office",fields:"name, description, ST_AsGeoJSON(geom)"},places:{name:"places",fields:"name, description, ST_AsGeoJSON(geom)"},trails:{name:"trails",fields:"name, description, lat, lng, ST_AsGeoJSON(geom)"}},b={splashElement:{className:"splash active",selector:"div.splash.active"},splashScreen:{active:!0,class:"splash",name:"splashScreen"}},g=(a("7f7f"),a("2317")),L={route:"/data"},k=(a("a481"),{markers:[],markersHash:{},createMarkersHash:function(){var e=this;this.markers.map(function(t,a){var s=t[0].getElement().classList[0].replace("-marker","");e.markersHash[s]=a})},setMarkers:function(e,t){var a=[];t.features.map(function(t){var s=document.createElement("div");s.className="".concat(e,"-marker");var n=new m.a.Popup({closeButton:!1,offset:15});"office"===e||"places"===e?(s.addEventListener("mouseenter",function(){n.setLngLat(t.geometry.coordinates).setHTML("<b>".concat(t.properties.name,"</b><br>").concat(t.properties.description)).addTo(O.map)}),s.addEventListener("mouseleave",function(){n.remove()}),a.push(new m.a.Marker(s).setLngLat(t.geometry.coordinates))):"trails"===e&&(s.addEventListener("mouseenter",function(){n.setLngLat([t.properties.lng,t.properties.lat]).setHTML("<b>".concat(t.properties.name,"</b><br>").concat(t.properties.description)).addTo(O.map)}),s.addEventListener("mouseleave",function(){n.remove()}),a.push(new m.a.Marker(s).setLngLat([t.properties.lng,t.properties.lat])))}),this.markers.push(a)}}),S={route:L.route,getLayerStyles:function(){var e=this,t=function(t){var a={fields:d[t].fields,table:d[t].name},s=g["Axios"].get(e.route,{params:a}).subscribe(function(e){if(e.data){var a=d[t].layer;a.source.data=e.data,p.pushLayerStyle(a),O.addLayerStyle(a)}else console.error("Data Error:\n",e.data)},function(e){console.log("Query Failed:\n",e.error)},function(){p.layerStyles.length===Object.keys(d).length&&p.createLayerStylesHash(),s.unsubscribe()})};for(var a in d)t(a)},getMarkers:function(){var e=this,t=function(t){var a={fields:v[t].fields,table:v[t].name},s=g["Axios"].get(e.route,{params:a}).subscribe(function(e){e.data?k.setMarkers(v[t].name,e.data):console.error("Data Error:\n",e.data)},function(e){console.error("Query Failed:\n",e.error)},function(){k.markers.length===Object.keys(v).length&&k.createMarkersHash(),s.unsubscribe()})};for(var a in v)t(a)}},_={state:{splash:b},setLayerActive:function(e){this.state.splash[e].active=!this.state.splash[e].active}},M={hideSplash:function(){_.setLayerActive(b.splashScreen.name)}},T=[{name:"Select Trail"},{name:"Blue Mountain",center:[-76.04,44.508],zoom:12},{name:"Charleston Lake",center:[-76.04,44.508],zoom:12},{name:"Lemoine Point",center:[-76.61,44.223],zoom:14},{name:"Lyn Valley",center:[-75.75,44.575],zoom:12},{name:"Mac Johnson",center:[-75.75,44.575],zoom:12},{name:"Seeley's Bay",center:[-76.22,44.485],zoom:13}],w={trails:T,trailsHash:{},createTrailsHash:function(){var e=this;this.trails.filter(function(e,t){return t>0}).map(function(t,a){return e.trailsHash[t.name]=a+1})},setTrail:function(e){if(e){e.stopPropagation();var t=e.target.value;t!==this.trails[0].name&&O.map.flyTo({center:this.trails[this.trailsHash[t]].center,zoom:this.trails[this.trailsHash[t]].zoom})}}},O={mapOptions:{container:c.container,style:y.default,center:c.center,zoom:c.zoom},mapStyle:y.default,loadMap:function(){m.a.accessToken=c.accessToken,this.map=new m.a.Map(this.mapOptions).addControl(new m.a.NavigationControl,h.navigationControl.position).on("styledata",function(){k.markers.length===Object.keys(v).length&&p.layerStyles.length===Object.keys(d).length&&M.splashElement.className===b.splashElement.className&&M.hideSplash()}).on("load",function(){M.splashElement=document.querySelector("".concat(b.splashElement.selector)),S.getMarkers(),S.getLayerStyles(),w.createTrailsHash()})},addLayerStyle:function(e){this.map.addLayer(e)},changeMapStyle:function(){var e=this;this.mapStyle===y.default?this.mapStyle=y.outdoors:this.mapStyle=y.default,this.map.setStyle(this.mapStyle),p.layerStyles.map(function(t){setTimeout(function(){e.map.addLayer(t),"visible"===t.layout.visibility&&e.map.setLayoutProperty(t.id,"visibility","visible")},1e3)})}},E={addMarkers:function(e){k.markers[k.markersHash[e]].map(function(e){return e.addTo(O.map)})},removeMarkers:function(e){k.markers[k.markersHash[e]].map(function(e){return e.remove()})},hideMarkers:function(){var e=this;k.markers.map(function(t){var a=t[0].getElement().classList[0].replace("-marker",""),s=document.querySelector("div.".concat(a,"-marker"));s&&(e.removeMarkers(a),t.hidden=!0)})},showMarkers:function(){var e=this;k.markers.map(function(t){if(t.hidden){var a=t[0].getElement().classList[0].replace("-marker","");e.addMarkers(a),t.hidden=!1}})}},H=[{active:!1,class:"terrain",name:"Terrain View"},{active:!0,class:"biosphere",icon:"biosphere-icon",name:"Biosphere",src:"../assets/biosphere.png",height:"18",width:"18"},{active:!1,class:"office",icon:"office-icon",name:"Office",src:"../assets/office.png",height:"20",width:"18"},{active:!1,class:"places",icon:"places-icon",name:"Places",src:"../assets/places.png",height:"20",width:"18"},{active:!1,class:"trails",icon:"trails-icon",name:"Trails",src:"../assets/trails.png",height:"20",width:"18"},{class:"reset",name:"Reset Map"}],x={state:{layers:H},setLayerActive:function(e){this.state.layers[e].hasOwnProperty("active")&&(this.state.layers[e].active=!this.state.layers[e].active)}},j={setLayer:function(e,t){if("reset"===e)window.location.reload(!0);else{var a=x.state.layers;"terrain"===e?(O.changeMapStyle(),E.hideMarkers(),setTimeout(function(){return E.showMarkers()},1200)):"biosphere"===e||"trails"===e?a[t].active?(p.layerStyles[p.layerStylesHash[e]].layout.visibility="visible",O.map.setLayoutProperty(e,"visibility","visible"),"trails"===e&&E.addMarkers(e)):(p.layerStyles[p.layerStylesHash[e]].layout.visibility="none",O.map.setLayoutProperty(e,"visibility","none"),"trails"===e&&E.removeMarkers(e)):"office"!==e&&"places"!==e||(a[t].active?E.addMarkers(e):E.removeMarkers(e))}}},C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("div",{class:[e.layer.class,{active:e.layer.active}],on:{click:e.selectLayer}},[e._v(e._s(e.layer.name))])])},A=[],P={name:"LayerElements",props:["layer"],methods:{selectLayer:function(e){var t=e.target.classList[0],a=x.state.layers.findIndex(function(e){return e.class===t});x.setLayerActive(a),j.setLayer(x.state.layers[a].class,a)}}},G=P,I=(a("27f1"),a("2877")),N=Object(I["a"])(G,C,A,!1,null,"3eed70f8",null);N.options.__file="LayerElements.component.vue";var z=N.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.icon.icon,attrs:{height:e.icon.height,width:e.icon.width}},[a("img",{class:e.icon.class,attrs:{src:e.icon.src,height:e.icon.height,width:e.icon.width},on:{click:e.selectLayer}})])},$=[],V={name:"LayerIcons",props:["icon"],methods:{selectLayer:function(e){var t=e.target.classList[0],a=x.state.layers.findIndex(function(e){return e.class===t});x.setLayerActive(a),j.setLayer(x.state.layers[a].class,a)}}},B=V,q=(a("2b69"),Object(I["a"])(B,J,$,!1,null,"8c26de54",null));q.options.__file="LayerIcons.component.vue";var R=q.exports,D={name:"Layers",components:{LayerElements:z,LayerIcons:R},data:function(){return{layers:x.state.layers}},computed:{icons:function(){return x.state.layers.filter(function(e){return e.icon})}},methods:{selectLayer:function(e){var t=e.target.classList[0],a=x.state.layers.findIndex(function(e){return e.class===t});x.setLayerActive(a),j.setLayer(x.state.layers[a].class,a)}}},F=D,Z=(a("b8fa"),Object(I["a"])(F,l,u,!1,null,null,null));Z.options.__file="Layers.component.vue";var Q=Z.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.splash.splashScreen.class,{active:e.splash.splashScreen.active}]})},U=[],Y={name:"Splash",data:function(){return{splash:_.state.splash}}},K=Y,X=(a("b3c6"),Object(I["a"])(K,W,U,!1,null,"4cfe0c3a",null));X.options.__file="Splash.component.vue";var ee=X.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("select",{staticClass:"selectTrail",on:{change:e.selectTrail}},e._l(e.trails,function(t){return a("option",{key:t.name},[e._v(e._s(t.name))])}))},ae=[],se={name:"Trails",data:function(){return{trails:T}},methods:{selectTrail:function(e){w.setTrail(e)}}},ne=se,re=(a("d729"),Object(I["a"])(ne,te,ae,!1,null,"5923cf62",null));re.options.__file="Trails.component.vue";var ie=re.exports,oe={name:"Canvas",data:function(){return{canvas:c}},components:{Layers:Q,Splash:ee,Trails:ie}},ce=oe,le=(a("1f12"),Object(I["a"])(ce,i,o,!1,null,"f3bb2dca",null));le.options.__file="Canvas.component.vue";var ue=le.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"headerContainer"},[a("img",{staticClass:"logo",attrs:{src:e.header.logo.src,alt:e.header.company.name}}),a("div",{staticClass:"company"},[e._v(e._s(e.header.company.name))]),a("div",{staticClass:"title"},[e._v(e._s(e.header.title.name))]),a("a",{staticClass:"repo",attrs:{href:e.header.repo.src,target:"_blank"}},[e._v(e._s(e.header.repo.name))])])},fe=[],me={company:{name:"Geospatial Web"},logo:{src:"../assets/logo.png"},repo:{name:"GitHub Repository",src:"https://github.com/geospatialweb/vue-map"},title:{name:"Node | Express | Vue | Mapbox GL | PostGIS | Docker"}},de={name:"Header",data:function(){return{header:me}}},he=de,ye=(a("6a5d"),Object(I["a"])(he,pe,fe,!1,null,"6da4a0fd",null));ye.options.__file="Header.component.vue";var ve=ye.exports,be={name:"App",components:{Canvas:ue,Header:ve}},ge=be,Le=(a("98c8"),Object(I["a"])(ge,n,r,!1,null,null,null));Le.options.__file="App.component.vue";var ke=Le.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(ke)}}).$mount("#app"),O.loadMap()},"643a":function(e,t,a){},"667c":function(e,t,a){},"6a5d":function(e,t,a){"use strict";var s=a("643a"),n=a.n(s);n.a},"7a90":function(e,t,a){},"98c8":function(e,t,a){"use strict";var s=a("d68d"),n=a.n(s);n.a},b3c6:function(e,t,a){"use strict";var s=a("7a90"),n=a.n(s);n.a},b8fa:function(e,t,a){"use strict";var s=a("3ac4"),n=a.n(s);n.a},d68d:function(e,t,a){},d729:function(e,t,a){"use strict";var s=a("0a08"),n=a.n(s);n.a},f2c1:function(e,t,a){}});
//# sourceMappingURL=app.d3612f72.js.map