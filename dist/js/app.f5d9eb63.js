(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],m=0,u=[];m<o.length;m++)r=o[m],i[r]&&u.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);p&&p(t);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},n=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"054f":function(e,t,a){"use strict";var s=a("fcd1"),i=a.n(s);i.a},"0668":function(e,t,a){"use strict";var s=a("e95c"),i=a.n(s);i.a},"0c26":function(e,t,a){"use strict";var s=a("9341"),i=a.n(s);i.a},"0e97":function(e,t,a){},1:function(e,t){},1032:function(e,t,a){"use strict";var s=a("896d"),i={splashScreen:s.splashScreen},n={SET_ACTIVE:function(e){e.splashScreen.active=!e.splashScreen.active}},r={setActive:function(e){var t=e.commit;t("SET_ACTIVE")}},o={splashScreen:function(e){return e.splashScreen}},c={namespaced:!0,state:i,mutations:n,actions:r,getters:o};t["a"]=c},1874:function(e,t,a){"use strict";var s=a("896d"),i={heatmap:{active:s.heatmap.active,class:s.heatmap.id,coverage:s.heatmap.coverage,radius:s.heatmap.radius,upperPercentile:s.heatmap.upperPercentile}},n={REINITIALIZE_PARAMS:function(e){e.heatmap.coverage=s.heatmap.coverage,e.heatmap.radius=s.heatmap.radius,e.heatmap.upperPercentile=s.heatmap.upperPercentile},SET_ACTIVE:function(e){e.heatmap.active=!e.heatmap.active},SET_PARAMS:function(e,t){var a=t.param,s=t.value;e.heatmap[a]=s}},r={reinitializeParams:function(e){var t=e.commit;t("REINITIALIZE_PARAMS")},setActive:function(e){var t=e.commit;t("SET_ACTIVE")},setParams:function(e,t){var a=e.commit,s=t.param,i=t.value;a("SET_PARAMS",{param:s,value:i})}},o={heatmap:function(e){return e.heatmap}},c={namespaced:!0,state:i,mutations:n,actions:r,getters:o};t["a"]=c},2:function(e,t){},2910:function(e,t,a){"use strict";var s=a("a0fb"),i=a.n(s);i.a},"2e2d":function(e,t,a){"use strict";var s=a("3905"),i=a.n(s);i.a},3:function(e,t){},3905:function(e,t,a){},5250:function(e,t,a){"use strict";var s=a("f63c"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("Map")],1)},n=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"headerContainer"},[a("img",{staticClass:"logo",attrs:{src:e.header.logo.src,alt:e.header.company.name}}),a("div",{staticClass:"company"},[e._v(e._s(e.header.company.name))]),a("div",{staticClass:"title"},[e._v(e._s(e.header.title.name))]),a("a",{staticClass:"repo",attrs:{href:e.header.repo.src,target:"_blank"}},[e._v(e._s(e.header.repo.name))])])},o=[],c=a("896d"),l={name:"Header",data:function(){return{header:c.header}}},p=l,m=(a("2910"),a("2877")),u=Object(m["a"])(p,r,o,!1,null,"79d16e00",null);u.options.__file="Header.vue";var d=u.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mapContainer"},[a("div",{attrs:{id:e.container}}),a("SplashScreen"),a("Heatmap"),a("Layers"),a("Trails")],1)},h=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.heatmap.class,{active:e.heatmap.active}]},[a("div",[a("label",[e._v("Coverage")]),a("input",{attrs:{id:"coverage",type:"range",min:"0",max:"1",step:"0.1"},domProps:{value:e.heatmap.coverage}}),a("span",[e._v(e._s(parseFloat(e.heatmap.coverage).toFixed(1)))])]),a("br"),a("div",[a("label",[e._v("Radius")]),a("input",{attrs:{id:"radius",type:"range",min:"1000",max:"5000",step:"500"},domProps:{value:e.heatmap.radius}}),a("span",[e._v(e._s(e.heatmap.radius))])]),a("br"),a("div",[a("label",[e._v("Upper Percentile")]),a("input",{attrs:{id:"upperPercentile",type:"range",min:"80",max:"100",step:"1"},domProps:{value:e.heatmap.upperPercentile}}),a("span",[e._v(e._s(e.heatmap.upperPercentile))])])])},y=[],S=a("cebc"),b=a("2f62"),g={name:"Heatmap",computed:Object(S["a"])({},Object(b["c"])({heatmap:"heatmap/heatmap"}))},_=g,L=(a("0c26"),Object(m["a"])(_,v,y,!1,null,"1e94fd6a",null));L.options.__file="Heatmap.vue";var T=L.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"layers"},e._l(e.layers,function(t){return a("LayerElements",{key:t.class,attrs:{el:t},on:{click:e.selectLayer}})}),1),e._l(e.layers,function(t){return a("LayerIcons",{key:t.class,attrs:{icon:t},on:{click:e.selectLayer}})})],2)},A=[],k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("div",{class:[e.el.class,{active:e.el.active}],on:{click:e.selectLayer}},[e._v(e._s(e.el.name))])])},M=[],H={name:"LayerElements",props:["el"],methods:Object(S["a"])({},Object(b["b"])({selectLayer:"layers/selectLayer"}))},P=H,O=(a("e3f4"),Object(m["a"])(P,k,M,!1,null,"b2072f42",null));O.options.__file="LayerElements.vue";var w=O.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.icon.icon,attrs:{height:e.icon.height,width:e.icon.width}},[a("img",{class:e.icon.class,attrs:{src:e.icon.src,height:e.icon.height,width:e.icon.width},on:{click:e.selectLayer}})])},x=[],C={name:"LayerIcons",props:["icon"],methods:Object(S["a"])({},Object(b["b"])({selectLayer:"layers/selectLayer"}))},j=C,R=(a("2e2d"),Object(m["a"])(j,I,x,!1,null,"1df61683",null));R.options.__file="LayerIcons.vue";var $=R.exports,D={name:"Layers",components:{LayerElements:w,LayerIcons:$},computed:Object(S["a"])({},Object(b["c"])({layers:"layers/layers"})),methods:Object(S["a"])({},Object(b["b"])({selectLayer:"layers/selectLayer"}))},z=D,V=(a("054f"),Object(m["a"])(z,E,A,!1,null,null,null));V.options.__file="Layers.vue";var N=V.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.splashScreen.class,{active:e.splashScreen.active}]})},Z=[],B={name:"SplashScreen",computed:Object(S["a"])({},Object(b["c"])({splashScreen:"splashScreen/splashScreen"}))},J=B,Y=(a("5250"),Object(m["a"])(J,G,Z,!1,null,"a4d2a45c",null));Y.options.__file="SplashScreen.vue";var F=Y.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("select",{staticClass:"trails",attrs:{disabled:e.disabled},on:{change:e.selectTrail}},e._l(e.trails,function(t){return a("option",{key:t.name},[e._v(e._s(t.name))])}),0)},q=[],Q={name:"Trails",computed:Object(S["a"])({},Object(b["c"])({disabled:"trails/disabled",trails:"trails/trails"})),methods:Object(S["a"])({},Object(b["b"])({selectTrail:"trails/selectTrail"}))},U=Q,W=(a("0668"),Object(m["a"])(U,K,q,!1,null,"6f7eec0c",null));W.options.__file="Trails.vue";var X=W.exports,ee=a("e28f"),te={name:"Map",data:function(){return{container:ee["a"].mapOptions.container}},components:{Heatmap:T,Layers:N,SplashScreen:F,Trails:X}},ae=te,se=(a("ec0a"),Object(m["a"])(ae,f,h,!1,null,"e07f24bc",null));se.options.__file="Map.vue";var ie=se.exports,ne=a("f8dc"),re={name:"App",components:{Header:d,Map:ie},created:function(){var e=this;ne["a"].on("reinitializeHeatmapParams",function(){return e.$store.dispatch("heatmap/reinitializeParams")}),ne["a"].on("setHeatmapActive",function(){return e.$store.dispatch("heatmap/setActive")}),ne["a"].on("setHeatmapParams",function(t,a){return e.$store.dispatch("heatmap/setParams",{param:t,value:a})}),ne["a"].on("setLayerActive",function(t){return e.$store.dispatch("layers/setActive",t)}),ne["a"].on("getLayerStyles",function(){return e.$store.dispatch("layerStyles/getLayerStyles")}),ne["a"].on("setLayerStyleActive",function(t){return e.$store.dispatch("layerStyles/setActive",t)}),ne["a"].on("getMapSettings",function(){return e.$store.dispatch("mapSettings/getSettings")}),ne["a"].on("setMapSettings",function(t){return e.$store.dispatch("mapSettings/setSettings",t)}),ne["a"].on("getMapStyle",function(){return e.$store.dispatch("mapStyles/getStyle")}),ne["a"].on("setMapStyle",function(t){return e.$store.dispatch("mapStyles/setStyle",t)}),ne["a"].on("getMarkers",function(){return e.$store.dispatch("markers/getMarkers")}),ne["a"].on("loadMarker",function(t){return e.$store.dispatch("markers/loadMarker",t)}),ne["a"].on("setMarkerActive",function(t){return e.$store.dispatch("markers/setActive",t)}),ne["a"].on("setMarkerHidden",function(t){return e.$store.dispatch("markers/setHidden",t)}),ne["a"].on("hideSplashScreen",function(){return e.$store.dispatch("splashScreen/setActive")}),ne["a"].on("getTrails",function(){return e.$store.dispatch("trails/getTrails")}),ne["a"].on("setTrailActive",function(t){return e.$store.dispatch("trails/setActive",t)}),ne["a"].on("setTrailsDisabled",function(){return e.$store.dispatch("trails/setDisabled")})},mounted:function(){a("bdbb").default.setEvents(),ne["a"].emit("loadMap")}},oe=re,ce=(a("5c0b"),Object(m["a"])(oe,i,n,!1,null,null,null));ce.options.__file="App.vue";var le=ce.exports,pe=a("1874"),me=a("cabe"),ue=a("e9a2"),de=a("f6c8"),fe=a("b5e7"),he=a("f736"),ve=a("1032"),ye=a("c63f");s["a"].use(b["a"]);var Se=new b["a"].Store({modules:{heatmap:pe["a"],layerStyles:ue["a"],layers:me["a"],mapSettings:de["a"],mapStyles:fe["a"],markers:he["a"],splashScreen:ve["a"],trails:ye["a"]}});s["a"].config.productionTip=!1,new s["a"]({store:Se,render:function(e){return e(le)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("5e27"),i=a.n(s);i.a},"5e27":function(e,t,a){},"7d65":function(e,t,a){},"896d":function(e){e.exports={header:{company:{name:"Geospatial Web"},logo:{src:"./assets/logo.png"},repo:{name:"GitHub Repository",src:"https://github.com/geospatialweb/vue-map"},title:{name:"Node | Express | Vue | Vuex | Mapbox GL | Deck.GL | PostGIS | Docker"}},heatmap:{active:!1,colour_range:[[1,152,189],[73,227,206],[216,254,181],[254,237,177],[254,173,84],[209,55,78]],coverage:"1.0",data_url:"https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/3d-heatmap/heatmap-data.csv",elevationRange:[0,1e3],elevationScale:250,extruded:!0,id:"heatmap",light_settings:{ambientRatio:.4,diffuseRatio:.6,lightsPosition:[-.144528,49.739968,8e3,-3.807751,54.104682,8e3],lightsStrength:[.8,0,.8,0],numberOfLights:2,specularRatio:.2},opacity:1,params:["coverage","radius","upperPercentile"],radius:"1000",settings:{bearing:-30,center:[-2,52],pitch:50,zoom:6.5},upperPercentile:"100"},hillshade:{id:"hillshading",index:"waterway-river-canal-shadow",layer:{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb"},source:"dem",type:"hillshade"},layerStyles:{biosphere:{fields:"name, description, ST_AsGeoJSON(geom)",layer:{id:"biosphere",active:!0,type:"fill",source:{type:"geojson"},layout:{visibility:"visible"},paint:{"fill-color":"#090","fill-opacity":.3,"fill-outline-color":"#000"}}},trails:{fields:"name, description, lat, lng, ST_AsGeoJSON(geom)",layer:{id:"trails",active:!1,type:"line",source:{type:"geojson"},layout:{visibility:"none"},paint:{"line-color":"#900","line-width":2}}}},layers:[{name:"Satellite",active:!1,class:"satellite",icon:"satellite-icon",src:"./assets/satellite.png",height:"20",width:"20"},{name:"Biosphere",active:!0,class:"biosphere",icon:"biosphere-icon",src:"./assets/biosphere.png",height:"16",width:"16"},{name:"Office",active:!1,class:"office",icon:"office-icon",src:"./assets/office.png",height:"20",width:"18"},{name:"Places",active:!1,class:"places",icon:"places-icon",src:"./assets/places.png",height:"20",width:"18"},{name:"Trails",active:!1,class:"trails",icon:"trails-icon",src:"./assets/trails.png",height:"20",width:"18"},{name:"Deck GL",active:!1,class:"heatmap",icon:"uber-icon",src:"./assets/uber.png",height:"18",width:"18"}],map:{accessToken:"pk.eyJ1IjoiZ2Vvc3BhdGlhbHdlYiIsImEiOiJ6WGdOUFRvIn0.GoVRwZq5EfVsLNGyCqgZTw",controls:{navigationControl:{position:"top-left"}},options:{center:[-76.3,44.45],container:"map",minZoom:2,maxZoom:15,zoom:9},settings:{bearing:0,bounds:{_ne:{lat:null,lng:null},_sw:{lat:null,lng:null}},center:[-76.3,44.45],pitch:0,zoom:9},styles:{outdoors:{name:"outdoors",active:!0,type:"vector",url:"mapbox://styles/mapbox/cjaudgl840gn32rnrepcb9b9g"},satellite:{name:"satellite",active:!1,type:"vector",url:"mapbox://styles/mapbox/satellite-v9"}}},markers:{office:{id:"office",active:!1,fields:"name, description, ST_AsGeoJSON(geom)",hidden:!1},places:{id:"places",active:!1,fields:"name, description, ST_AsGeoJSON(geom)",hidden:!1},trails:{id:"trails",active:!1,fields:"name, description, lat, lng, ST_AsGeoJSON(geom)",hidden:!1}},splashScreen:{active:!0,class:"splashScreen"},trails:[{name:"Select Trail"},{name:"Blue Mountain",active:!1,center:[-76.04,44.508],zoom:11},{name:"Charleston Lake",active:!1,center:[-76.04,44.508],zoom:11},{name:"Lemoine Point",active:!1,center:[-76.61,44.223],zoom:13},{name:"Lyn Valley",active:!1,center:[-75.75,44.575],zoom:11},{name:"Mac Johnson",active:!1,center:[-75.75,44.575],zoom:11},{name:'Seeley"s Bay',active:!1,center:[-76.22,44.485],zoom:11}]}},9341:function(e,t,a){},a0fb:function(e,t,a){},a5a0:function(e,t,a){"use strict";a("20d6");var s=a("f8dc"),i=a("cabe"),n=a("e28f"),r=a("a7bf");t["a"]={selectLayer:function(e){e.stopPropagation();var t=e.target.classList[0],a=i["a"].state.layers.findIndex(function(e){return e.class===t});s["a"].emit("setLayerActive",a),this.setLayer(t,a)},setLayer:function(e,t){switch(e){case"satellite":r["a"].hideMarkers(),n["a"].setMapStyle();break;case"biosphere":case"trails":s["a"].emit("setLayerStyleActive",e),n["a"].setLayerStyleVisibility(t),i["a"].state.layers[t].active&&"trails"===e?r["a"].addMarkers(e):i["a"].state.layers[t].active||"trails"!==e||r["a"].removeMarkers(e);break;case"office":case"places":i["a"].state.layers[t].active?r["a"].addMarkers(e):r["a"].removeMarkers(e);break;case"heatmap":s["a"].emit("setHeatmapActive"),n["a"].displayHeatmap();break;default:}}}},a7bf:function(e,t,a){"use strict";a("a481");var s=a("f8dc"),i=a("e28f"),n=a("f736");t["a"]={addMarkers:function(e){n["a"].state.markers[n["a"].state.markersHash[e]].map(function(e){return s["a"].emit("setMarkerActive",e),e.addTo(i["a"].map),!0})},removeMarkers:function(e){n["a"].state.markers[n["a"].state.markersHash[e]].map(function(e){return s["a"].emit("setMarkerActive",e),e.remove(),!0})},hideMarkers:function(){var e=this;n["a"].state.markers.map(function(t){var a=t[0].getElement().classList[0].replace("-marker",""),i=document.querySelector("div.".concat(a,"-marker"));return i&&(s["a"].emit("setMarkerHidden",t),e.removeMarkers(a)),!0})},showMarkers:function(){var e=this;n["a"].state.markers.map(function(t){if(t.hidden){var a=t[0].getElement().classList[0].replace("-marker","");s["a"].emit("setMarkerHidden",t),e.addMarkers(a)}return!0})}}},b5e7:function(e,t,a){"use strict";var s=a("a4bb"),i=a.n(s),n=(a("7514"),a("7f7f"),a("cadf"),a("551c"),a("097d"),a("896d")),r=a("f8dc"),o={mapStyles:n.map.styles},c={SET_ACTIVE:function(e,t){e.mapStyles[t].active=!e.mapStyles[t].active}},l={getStyle:function(){var e=i()(o.mapStyles).find(function(e){return o.mapStyles[e].active});r["a"].emit("mapStyle",o.mapStyles[e])},setStyle:function(e,t){var a,s=e.commit;s("SET_ACTIVE",t),a=t===o.mapStyles.outdoors.name?o.mapStyles.satellite.name:o.mapStyles.outdoors.name,s("SET_ACTIVE",a)}},p={namespaced:!0,state:o,mutations:c,actions:l};t["a"]=p},bdbb:function(e,t,a){"use strict";a.r(t);var s=a("f8dc"),i=a("a5a0"),n=a("e28f"),r=a("e192"),o=a.n(r),c={setMarker:function(e,t){var a=[];a.hidden=e.hidden,t.features.map(function(t){var s=document.createElement("div"),i=new o.a.Popup({closeButton:!1,offset:15});switch(s.active=e.active,s.className="".concat(e.id,"-marker"),s.addEventListener("mouseleave",function(){i.remove()}),e.id){case"office":case"places":s.addEventListener("mouseenter",function(){i.setLngLat(t.geometry.coordinates).setHTML("<b>".concat(t.properties.id,"</b><br>").concat(t.properties.description)).addTo(n["a"].map)}),a.push(new o.a.Marker(s).setLngLat(t.geometry.coordinates));break;case"trails":s.addEventListener("mouseenter",function(){i.setLngLat([t.properties.lng,t.properties.lat]).setHTML("<b>".concat(t.properties.id,"</b><br>").concat(t.properties.description)).addTo(n["a"].map)}),a.push(new o.a.Marker(s).setLngLat([t.properties.lng,t.properties.lat]));break;default:}return!0}),s["a"].emit("loadMarker",a)}},l=(a("7f7f"),a("20d6"),a("c63f")),p={selectTrail:function(e){e.stopPropagation();var t=e.target.value,a=l["a"].state.trails.findIndex(function(e){return e.name===t});a>0&&(s["a"].emit("setTrailActive",a),this.setTrail(t))},setTrail:function(e){n["a"].map.flyTo({center:l["a"].state.trails[l["a"].state.trailsHash[e]].center,zoom:l["a"].state.trails[l["a"].state.trailsHash[e]].zoom})}};t["default"]={setEvents:function(){s["a"].on("selectLayer",function(e){return i["a"].selectLayer(e)}),s["a"].on("addLayerStyle",function(e){return n["a"].addLayerStyle(e)}),s["a"].on("loadMap",function(){return n["a"].loadMap()}),s["a"].on("mapSettings",function(e){return n["a"].mapSettings=e,!0}),s["a"].on("mapStyle",function(e){return n["a"].mapStyle=e,!0}),s["a"].on("setMarker",function(e,t){return c.setMarker(e,t)}),s["a"].on("selectTrail",function(e){return p.selectTrail(e)})}}},c63f:function(e,t,a){"use strict";a("7f7f"),a("cadf"),a("551c"),a("097d");var s=a("896d"),i=a("f8dc"),n={disabled:!1,trails:[],trailsHash:{}},r={CREATE_TRAILS_HASH:function(e){e.trails.filter(function(e,t){return t>0}).map(function(t,a){return e.trailsHash[t.name]=a+1,!0})},LOAD_TRAILS:function(e,t){t.map(function(t){return e.trails.push(t)})},SET_ACTIVE:function(e,t){e.trails.map(function(a,s){return e.trails[s].active=s===t,!0})},SET_DISABLED:function(e){e.disabled=!e.disabled}},o={getTrails:function(e){var t=e.commit;t("LOAD_TRAILS",s.trails),t("CREATE_TRAILS_HASH")},selectTrail:function(e,t){i["a"].emit("selectTrail",t)},setActive:function(e,t){var a=e.commit;a("SET_ACTIVE",t)},setDisabled:function(e){var t=e.commit;t("SET_DISABLED")}},c={disabled:function(e){return e.disabled},trails:function(e){return e.trails}},l={namespaced:!0,state:n,mutations:r,actions:o,getters:c};t["a"]=l},cabe:function(e,t,a){"use strict";var s=a("896d"),i=a("f8dc"),n={layers:s.layers},r={SET_ACTIVE:function(e,t){e.layers[t].active=!e.layers[t].active}},o={selectLayer:function(e,t){i["a"].emit("selectLayer",t)},setActive:function(e,t){var a=e.commit;a("SET_ACTIVE",t)}},c={layers:function(e){return e.layers}},l={namespaced:!0,state:n,mutations:r,actions:o,getters:c};t["a"]=l},e28f:function(e,t,a){"use strict";a("7f7f"),a("20d6");var s=a("a4bb"),i=a.n(s),n=a("e192"),r=a.n(n),o=a("896d"),c=a("f8dc"),l=a("bd86"),p=(a("c5f6"),a("5698")),m=a("82b5"),u=a("4278"),d={params:o.heatmap.params,addHeatmap:function(){E.addLayerStyle(this.heatmap)},loadHeatmap:function(){var e=this;this.heatmap=new u["a"]({type:m["a"],id:o.heatmap.id,colorRange:o.heatmap.colour_range,coverage:Number(o.heatmap.coverage),data:p["a"](o.heatmap.data_url),elevationRange:o.heatmap.elevationRange,elevationScale:o.heatmap.elevationScale,extruded:o.heatmap.extruded,getPosition:function(e){return[Number(e.lng),Number(e.lat)]},opacity:o.heatmap.opacity,radius:Number(o.heatmap.radius),upperPercentile:Number(o.heatmap.upperPercentile)}),this.params.map(function(t){return document.getElementById(t).oninput=function(a){var s=a.target.value;c["a"].emit("setHeatmapParams",t,s),e.heatmap.setProps(Object(l["a"])({},t,Number(s)))},!0}),this.addHeatmap()},reinitializeHeatmap:function(){var e=this;c["a"].emit("reinitializeHeatmapParams"),this.params.map(function(t){return e.heatmap.setProps(Object(l["a"])({},t,Number(o.heatmap[t]))),!0})}},f={getData:function(){d.loadHeatmap(),c["a"].emit("getTrails"),c["a"].emit("getMarkers"),c["a"].emit("getLayerStyles")}},h=a("1874"),v=a("cabe"),y=a("a5a0"),S=a("e9a2"),b=a("f6c8"),g=a("b5e7"),_=a("a7bf"),L=a("f736"),T=a("1032"),E=t["a"]={accessToken:o.map.accessToken,heatmap:o.heatmap.settings,hillshade:o.hillshade,layerStyles:o.layerStyles,mapControls:o.map.controls,mapOptions:{center:o.map.options.center,container:o.map.options.container,style:g["a"].state.mapStyles.outdoors.url,minZoom:o.map.options.minZoom,maxZoom:o.map.options.maxZoom,zoom:o.map.options.zoom},mapStyle:g["a"].state.mapStyles.outdoors,markers:o.markers,loadMap:function(){var e=this;r.a.accessToken=this.accessToken,this.map=new r.a.Map(this.mapOptions).addControl(new r.a.NavigationControl,this.mapControls.navigationControl.position).on("data",function(){S["a"].state.layerStyles.length===i()(e.layerStyles).length&&L["a"].state.markers.length===i()(e.markers).length&&T["a"].state.splashScreen.active&&c["a"].emit("hideSplashScreen")}).on("load",function(){e.addHillShading(),f.getData()}).on("render",function(){e.setMapSettings()})},addHillShading:function(){this.addLayerStyle(this.hillshade,this.hillshade.index)},addLayerStyle:function(e,t){t&&this.map.addSource(e.source,e.layer),this.map.addLayer(e,t),d.heatmap&&!h["a"].state.heatmap.active&&e.id===d.heatmap.id&&this.map.setLayoutProperty(e.id,"visibility","none")},displayHeatmap:function(){var e=this,t=v["a"].state.layers.findIndex(function(e){return e.class===g["a"].state.mapStyles.satellite.name});h["a"].state.heatmap.active?(c["a"].emit("setTrailsDisabled"),this.map.bearing=b["a"].state.mapSettings.bearing,this.map.center=b["a"].state.mapSettings.center,this.map.pitch=b["a"].state.mapSettings.pitch,this.map.mapStyle=this.mapStyle,this.map.zoom=b["a"].state.mapSettings.zoom,this.map.setBearing(this.heatmap.bearing),this.map.setCenter(this.heatmap.center),this.map.setPitch(this.heatmap.pitch),this.map.setZoom(this.heatmap.zoom),this.mapStyle.name===g["a"].state.mapStyles.outdoors.name?(c["a"].emit("setLayerActive",t),y["a"].setLayer(v["a"].state.layers[t].class,t)):this.map.setLayoutProperty(d.heatmap.id,"visibility","visible")):(c["a"].emit("setTrailsDisabled"),d.reinitializeHeatmap(),this.map.setBearing(this.map.bearing),this.map.setCenter(this.map.center),this.map.setLayoutProperty(d.heatmap.id,"visibility","none"),this.map.setPitch(this.map.pitch),this.map.setZoom(this.map.zoom),S["a"].state.layerStyles.map(function(t){return"visible"===t.layout.visibility&&e.map.setLayoutProperty(t.id,"visibility","none"),!0}),this.mapStyle.name!==this.map.mapStyle.name?(c["a"].emit("setLayerActive",t),y["a"].setLayer(v["a"].state.layers[t].class,t)):this.map.mapStyle.name===g["a"].state.mapStyles.outdoors.name?(_["a"].hideMarkers(),setTimeout(function(){S["a"].state.layerStyles.map(function(t){return"visible"===t.layout.visibility&&e.map.setLayoutProperty(t.id,"visibility","visible"),!0}),_["a"].showMarkers()},1250)):this.map.mapStyle.name===g["a"].state.mapStyles.satellite.name&&S["a"].state.layerStyles.map(function(t){return"visible"===t.layout.visibility&&e.map.setLayoutProperty(t.id,"visibility","visible"),!0}))},getMapStyle:function(){c["a"].emit("setMapStyle",this.mapStyle.name),c["a"].emit("getMapStyle")},setLayerStyleVisibility:function(e){var t=v["a"].state.layers[e];t.active?this.map.setLayoutProperty(t.class,"visibility","visible"):this.map.setLayoutProperty(t.class,"visibility","none")},setMapSettings:function(){var e={bearing:this.map.getBearing(),bounds:this.map.getBounds(),center:this.map.getCenter(),pitch:this.map.getPitch(),zoom:this.map.getZoom()};e.bounds._ne.lat===b["a"].state.mapSettings.bounds._ne.lat&&e.bounds._ne.lng===b["a"].state.mapSettings.bounds._ne.lng&&e.bounds._sw.lat===b["a"].state.mapSettings.bounds._sw.lat&&e.bounds._sw.lng===b["a"].state.mapSettings.bounds._sw.lng||c["a"].emit("setMapSettings",e)},setMapStyle:function(){var e=this;this.getMapStyle(),h["a"].state.heatmap.active&&this.mapStyle.name===g["a"].state.mapStyles.satellite.name&&this.map.removeLayer(this.hillshade.id),this.map.setStyle(this.mapStyle.url),setTimeout(function(){e.mapStyle.name===g["a"].state.mapStyles.outdoors.name&&e.addHillShading(),d.addHeatmap(),h["a"].state.heatmap.active||e.map.setLayoutProperty(d.heatmap.id,"visibility","none"),S["a"].state.layerStyles.map(function(t){return e.addLayerStyle(t),"visible"===t.layout.visibility&&e.map.setLayoutProperty(t.id,"visibility","visible"),!0}),_["a"].showMarkers()},1250)}}},e3f4:function(e,t,a){"use strict";var s=a("7d65"),i=a.n(s);i.a},e95c:function(e,t,a){},e9a2:function(e,t,a){"use strict";var s=a("a4bb"),i=a.n(s),n=(a("7f7f"),a("2317")),r=a("896d"),o=a("f8dc"),c={layerStyles:[],layerStylesHash:{}},l={CREATE_LAYERSTYLES_HASH:function(e){e.layerStyles.map(function(t,a){return e.layerStylesHash[t.id]=a,!0})},LOAD_LAYERSTYLE:function(e,t){e.layerStyles.push(t),o["a"].emit("addLayerStyle",t)},SET_ACTIVE:function(e,t){var a=e.layerStylesHash[t];e.layerStyles[a].active=!e.layerStyles[a].active,e.layerStyles[a].active?e.layerStyles[a].layout.visibility="visible":e.layerStyles[a].layout.visibility="none"}},p={getLayerStyles:function(e){var t=e.commit,a=r.layerStyles;i()(a).map(function(e){var s={fields:a[e].fields,table:a[e].layer.id},r=n["Axios"].get("/api/geojson",{params:s}).subscribe(function(s){if(s.data){var i=a[e].layer;i.source.data=s.data,t("LOAD_LAYERSTYLE",i)}else console.error("Data Error:\n",s.data)},function(e){console.error("Query Failed:\n",e.error)},function(){c.layerStyles.length===i()(a).length&&t("CREATE_LAYERSTYLES_HASH"),r.unsubscribe()});return!0})},setActive:function(e,t){var a=e.commit;a("SET_ACTIVE",t)}},m={namespaced:!0,state:c,mutations:l,actions:p};t["a"]=m},ec0a:function(e,t,a){"use strict";var s=a("0e97"),i=a.n(s);i.a},f63c:function(e,t,a){},f6c8:function(e,t,a){"use strict";a("cadf"),a("551c"),a("097d");var s=a("896d"),i=a("f8dc"),n={mapSettings:s.map.settings},r={SET_SETTINGS:function(e,t){e.mapSettings=t}},o={getSettings:function(){i["a"].emit("mapSettings",n.map)},setSettings:function(e,t){var a=e.commit;a("SET_SETTINGS",t)}},c={namespaced:!0,state:n,mutations:r,actions:o};t["a"]=c},f736:function(e,t,a){"use strict";var s=a("a4bb"),i=a.n(s),n=(a("a481"),a("2317")),r=a("896d"),o=a("f8dc"),c={markers:[],markersHash:{}},l={CREATE_MARKERS_HASH:function(e){e.markers.map(function(t,a){var s=t[0].getElement().classList[0].replace("-marker","");return e.markersHash[s]=a,!0})},LOAD_MARKER:function(e,t){e.markers.push(t)},SET_ACTIVE:function(e,t){t.active=!t.active},SET_HIDDEN:function(e,t){t.hidden=!t.hidden}},p={getMarkers:function(e){var t=e.commit,a=r.markers;i()(a).map(function(e){var s={fields:a[e].fields,table:a[e].id},r=n["Axios"].get("/api/geojson",{params:s}).subscribe(function(t){t.data?o["a"].emit("setMarker",a[e],t.data):console.error("Data Error:\n",t.data)},function(e){console.error("Query Failed:\n",e.error)},function(){c.markers.length===i()(a).length&&t("CREATE_MARKERS_HASH"),r.unsubscribe()});return!0})},loadMarker:function(e,t){var a=e.commit;a("LOAD_MARKER",t)},setActive:function(e,t){var a=e.commit;a("SET_ACTIVE",t)},setHidden:function(e,t){var a=e.commit;a("SET_HIDDEN",t)}},m={namespaced:!0,state:c,mutations:l,actions:p};t["a"]=m},f8dc:function(e,t,a){"use strict";var s=a("7e25"),i=a.n(s),n=new i.a;t["a"]=n},fcd1:function(e,t,a){}});
//# sourceMappingURL=app.f5d9eb63.js.map